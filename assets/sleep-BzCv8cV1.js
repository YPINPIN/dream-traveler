import"./main-wLSLBlrs.js";const L="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5%2011.5455L10.25%2017L19%207'%20stroke='%2315312F'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e";document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("sleep-alert"),e=document.getElementById("alert-sleep-setting"),a=document.getElementById("sleep_time");if(!t||!e)return;const n=()=>{const d=t.checked;e.classList.toggle("opacity-30",!d),a.textContent=d?"細雨輕敲":"",a.classList.toggle("text-neutral-400",d)};t.addEventListener("change",n),n()});(()=>{const t=document.getElementById("endSleep"),e=document.getElementById("sleepRange"),a=document.getElementById("knob"),n=document.getElementById("sleepLabel");n.querySelector(".bg-fill");const d=8,r=95;let o=0,c=40;function l(){const i=t.querySelector(".track").getBoundingClientRect();c=a.getBoundingClientRect().width||40,o=Math.max(0,i.width-d*2-c)}function s(i){const m=Math.max(0,Math.min(100,+i))/100,v=Math.round(o*m);a.style.transform=`translate(${v}px)`}function g(){t.classList.remove("dragging"),t.classList.add("done"),e.value=100,s(100),n.innerHTML=`完成睡眠紀錄<span class="end-btn rounded-circle p-2 bg-neutral-100 position-absolute" id="knob"><img src="${L}" alt="next"></span>`,e.disabled=!0,n.classList.remove("btn-primary-300"),n.classList.add("btn-primary-400"),document.getElementById("sleepLabel").click()}function u(){t.classList.remove("done","dragging"),e.disabled=!1,e.value=0,s(0),n.textContent="滑動以結束睡眠"}e.addEventListener("pointerdown",()=>{t.classList.add("dragging"),l()}),e.addEventListener("touchstart",()=>{t.classList.add("dragging"),l()},{passive:!0}),e.addEventListener("input",()=>{s(e.value)}),e.addEventListener("change",()=>{+e.value>=r?g():(e.value=0,s(0),t.classList.remove("dragging"))}),e.addEventListener("pointerup",()=>t.classList.remove("dragging")),e.addEventListener("pointercancel",()=>t.classList.remove("dragging")),e.addEventListener("blur",()=>t.classList.remove("dragging")),window.addEventListener("resize",()=>{const i=+e.value;l(),s(i)}),window.resetEndSleep=u,l(),s(e.value)})();
